<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title>Testing piwik_analytics cfapp</title>

    <style type="text/css">
      body {padding-top:4em;}
    </style>

    <script type="text/javascript"> var CloudFlare = CloudFlare || []; </script>
    <script type="text/javascript" src="http://ajax.cloudflare.com/cdn-cgi/nexp/cloudflare.js"></script>
    <script type="text/javascript">

      var piwikConfig = {
        "piwik_receiver" : "https://piwik-ssl.ns1.net/piwik.php",
        "piwik_js" : "https://cdnjs.cloudflare.com/ajax/libs/piwik/1.10.1/piwik.js",
        "site_id" : "1",
        "link_tracking" : "true"
      }
// just use a, it's smaller
var a=window.CloudFlare;
// push this local path for the module
a.push(
    {
paths:{
piwik_analytics:"public/javascripts/"
}
}
);
a.push(
    function(b,c){
    c("piwik_analytics/config",function(){
      return piwikConfig
      }
     );
    b(["piwik_analytics"])
    });

  </script>

</head>

<body>
  <h1>Piwik</h1>
  <p>
  <strong>Piwik</strong>
  </p>
  <ul>
    <li id="visitorId" >getVisitorId </li>
    <li>not empty2</li>

  </ul>
  <h2>Built on top of Cloudflare</h2>
  <p>
  Cloudflare enables one click install, and ensures safe delivery of the javascript
  </p>

  <script type="text/javascript">

var _paq = _paq || []; 
var visitor_id;

_paq.push([ function() { visitor_id = this.getVisitorId(); }]);

document.getElementById("visitorId").innerHTML = "getVisitorId="+visitor_id;

</script>


</body>
</html>
