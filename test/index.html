<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title>Testing piwik_analytics cfapp</title>
    <style>

      a:link    {color:blue;}
      a:visited {color:blue;}
      a:hover   {color:red;}
      a:active  {color:yellow;} 

    </style>
    <script type="text/javascript"> var CloudFlare = CloudFlare || []; </script>
    <script type="text/javascript" src="https://ajax.cloudflare.com/cdn-cgi/nexp/cloudflare.js"></script>
    <!-- load up our test config for local testing -->
    <script type="text/javascript" src="./testConfig.json"></script>

    <script type="text/javascript">

    /* just use a, it's smaller */ 

    var a=window.CloudFlare;

    /* push this local path for use in loading the the app/module   */ 

    a.push({paths:{piwik_analytics:"../public/javascripts/"}});

    /* force load our piwikConfig associative array  */
    /* load the piwik_analytics module */

    a.push(function(b,c){ c("piwik_analytics/config",function(){ return piwikConfig }); b(["piwik_analytics"]); });

    </script>


    <!-- The goal is to load piwik.js as it would below. Also to utilize the global _paq array to push commands. -->
    <!--
    <script src="https://cdnjs.cloudflare.com/ajax/libs/piwik/1.10.1/piwik.js"></script>
    -->

  </head>

  <body>
    <h1>Piwik Analytics CloudFlare Test App</h1>

    <div id="timeDiv">&nbsp;</div>

    <p>
    <strong>Testing Gets</strong>
    </p>

    <ul>
      <li id="app_change">app_change</li>
      <li id="app_change_visitor_id">app_change visitor_id</li>
      <li id="app_change_visitor_info">app_change visitor_info</li>
      <li id="visitorId" >getVisitorId </li>
      <li id="getTracker">getTracker </li>

    </ul>

    <p>
    <strong>Testing configured options</strong>
    </p>
    <ul>
      <li id="use_cdnjs"> use_cdnjs </li>
      <li id="piwik_js_default"> piwik_js_default </li>
      <li id="js_url"> js_url </li>
      <li id="site_id.a" > site_id.a </li>
      <li id="site_id.b" > site_id.b </li>
      <li id="trackerURL.a"> trackerURL </li>
      <li id="trackerURL.b"> trackerURL </li>
      <li id="paq_push.a"> paq_push.a </li>
      <li id="paq_push.b"> paq_push.b </li>
      
      <!-- no goals yet, seems easier to just _paq.push them -->
      <!-- 
      <li id="goal1"> goal1 </li>
      <li id="goal2"> goal2 </li>
      <li id="goal3"> goal3 </li>
      <li id="goal4"> goal4 </li>
      <li id="goal5"> goal5 </li>
      -->
    </ul>

    <p>
    <strong>Testing Link Tracking</strong>
    </p>
    <ul>
      <li><a href="iframeTest.html">iframe buster test</a></li>
      <li><a href='#/no-tracking' target="_self" class='no-tracking'>Class 'no-tracking' No Tracking Test</a></li>
      <li><a href='https://github.com/px/cfapp-piwik-analytics/archive/master.zip' class='piwik_ignore'>File I don't want to track as a download</a> Latest master.zip </li>
      <li><a href='#/piwik_download' class='piwik_download'>Link I want to track as a download</a></li>
      <li><a href='#/piwik_link' target="_self" class='piwik_link'>Link I want to track as an outlink</a></li>
      <li><a href='example_piwik_ajax.html#/' target="_self" class='no-tracking'>Class 'no-tracking' example_piwik_ajax.html</a></li>
      <li><a href='#/' target="_self" class='no-tracking'>Class 'no-tracking' No Tracking Test</a></li>
    </ul>


    <!-- this loads up the testApp which updates and refreshes the above items when working properly. -->
    <script type="text/javascript" src="./testApp.js"></script>

  </body>
</html>
