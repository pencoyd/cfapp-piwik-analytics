/*
* @name      Miniature Hipster
* @author    Rob Friedman
* @url       http://playerx.net
* @license   //github.com/px/cfapp-piwik-analytics/raw/master/LICENSE.txt
*/

CloudFlare.define("piwik_analytics/perf",["cloudflare/console","piwik_analytics/config"],function(e,i){var n,r,o,a;return r={},n={},n.now=function(){return(new Date).getTime()},a=window,o=a.performance||a.mozPerformance||a.msPerformance||a.webkitPerformance||n,null!==i._debug&&(CloudFlare.push({verbose:1}),a.localStorage.clear()),r.now=function(){var i;try{return o.now()}catch(r){return i=r,e.error(i),n.now()}},r.perfThen=r.now(),r}),CloudFlare.define("piwik_analytics/tracker",["cloudflare/console","piwik_analytics/config","piwik_analytics/perf"],function(e,i,n){var r,o,a;if(o={},o.perfThen=n.now(),o._debug=i._debug,o.isPiwik=!1,a=window,a._paq=a._paq||[],o.setTracker=function(r){return null==r&&(r=i.default_piwik_install||"/piwik"),o.perfThenJs=n.now(),a=window,CloudFlare.require([unescape(r+"/piwik.js")],o.isPiwik=!0),null!==o._debug&&e.log('Piwik Install	="'+unescape(r)+'"'),a._paq.push(["setTrackerUrl",unescape(r+"/piwik.php")]),r},o.setSiteId=function(n){var r;return r=i.default_piwik_site_id||"1",!isNaN(n)&&n>=1?null!==o._debug&&e.log('Piwik WebsiteId	="'+n+'"'):null!==o._debug&&(e.error('Invalid WebsiteId	="'+n+'" is not a number;'+(" defaulting to '"+r+"'")),n=r),a._paq.push(["setSiteId",unescape(n)]),n},o.piwik_install=o.setTracker(i.piwik_install),o.site_id=o.setSiteId(i.site_id),null!==o._debug)try{e.log(""+(n.now()-o.perfThen)+" ms	"+'"piwik_analytics/tracker" time')}catch(t){r=t,e.error("uhoh "+r)}return o}),CloudFlare.define("piwik_analytics",["cloudflare/console","piwik_analytics/perf","piwik_analytics/config","piwik_analytics/tracker"],function(_con,_perf,_cfg,_tracker){var e,mp,myPiwik,paqPush,wa,_err,_this=this;myPiwik={},mp=myPiwik,mp.perfThen=_perf.now(),wa=window,_err="uhoh! ",paqPush=function(e){var i,n,r;n=0;try{r=window._paq=window._paq||[]}catch(o){i=o,_con.error(""+_err+" _paq "+i)}try{switch(typeof e){case"object":n=r.push(e);break;case"string":n=r.push([e]);break;case"function":n=r.push([e]);break;default:_con.error(""+_err+" -- not sure what type this is "+typeof e)}return _cfg._debug&&_con.log("_paq"+(n>0?".length="+n:"")+(",	"+e)),n}catch(o){return i=o,_con.error(""+_err+" pp ("+i+")"),n}},mp.getVisitorId=function(){var e;return e=!1,wa=window,wa._paq.push([function(){return e=this.getVisitorId(),null!==_cfg._debug&&_con.log("Piwik.getVisitorId = "+e),e}]),e},mp.advMenuOpts=function(){var beginningcomma,doublecomma,e,evileval,fixdoublespaces,index,m,obj,option,pattern,trailingcomma,weirdcomma,_i,_len,_paq_push,_ref;if(wa=window,m="ADVANCED FEATURES ",null!=_cfg._debug&&_con.log(m+"BEGIN"),_paq_push=_cfg.paq_push,void 0!==_paq_push&&null!==_paq_push)for(index=1,fixdoublespaces=/\s{2,}/g,doublecomma=/(\s{0,}\,){2,}/g,beginningcomma=/^([\,\s\S]{0,})\[/,trailingcomma=/\]([\,\s\S]{0,})$/,weirdcomma=/\s?\,\s?/g,evileval=/eval\s{0,}\(.+\)/g,pattern=/\]\s{0,}\,{0,}\s{0,}\[?/,obj=_paq_push,obj=obj.replace(doublecomma,", "),obj=obj.replace(fixdoublespaces," "),obj=obj.replace(weirdcomma,", "),_ref=obj.split(pattern),_i=0,_len=_ref.length;_len>_i;_i++){if(option=_ref[_i],void 0!==option&&""!==option){if(/eval\s{0,}\(.+\)/g.test(option)){_con.error(""+_err+" -- sorry buddy eval() usage is not allowed.");continue}if(option=option.replace(beginningcomma,""),option=option.replace(trailingcomma,"]"),option.length>8){option="["+option+"]";try{paqPush(eval(option))}catch(_error){e=_error,_con.error(""+_err+" paq_push option="+option+" ("+e+")")}}}index++}return null!=_cfg._debug&&_con.log(m+"END"),wa._paq},mp.menuOpts=function(){var e,i,n;if(paqPush(["enableLinkTracking",!0]),null!==_cfg.tracking_do_not_track?paqPush(["setDoNotTrack",!0]):paqPush(["setDoNotTrack",!1]),i=_cfg.tracking_group_by_domain,void 0!==i&&null!==i&&paqPush(["setDocumentTitle",""+document.domain+" / "+document.title]),i=_cfg.tracking_all_subdomains,!isNaN(i)&&i>1&&15>=i&&(n="."+document.domain.split(".").slice(-1*i).join("."),paqPush(["setCookieDomain",n])),i=_cfg.tracking_all_aliases,void 0!==i&&null!==i)try{paqPush(["setDomains",Array(i)])}catch(r){e=r,_con.error(""+_err+" tracking_all_aliases="+i+" ("+e+")")}return void 0!==_cfg.advMenu&&null!==_cfg.advMenu&&mp.advMenuOpts(),paqPush(["trackPageView"]),wa._paq};try{mp.menuOpts()}catch(_error){e=_error,_con.error(""+_err+" Main "+e)}return null!==_cfg._debug&&_con.log(""+(_perf.now()-mp.perfThen)+" ms	"+'"piwik_analytics" time'),mp}),CloudFlare.define("piwik_analytics/showPerf",["cloudflare/console","piwik_analytics/config","piwik_analytics/perf","piwik_analytics/tracker"],function(e,i,n,r){var o;return o={},o.perfThen=n.now(),o._debug=i._debug,o.showPerf=function(){return window._paq.push([function(){var i;try{e.log(n.now()-r.perfThenJs+" ms"+"	Piwik library fetch/exec time")}catch(o){i=o,e.error("uhoh "+i)}try{e.log(n.now()-n.perfThen+" ms"+"	Total exec time")}catch(o){i=o,e.error("uhoh "+i)}return!0}]),!0},null!==o._debug&&(o.showPerf(),e.log(n.now()-o.perfThen+" ms"+'	"piwik_analytics/showPerf" time')),o});