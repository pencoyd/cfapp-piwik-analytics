/*
#*  @name      Miniature Hipster
#*  @version   0.0.29b
#*  @author    Rob Friedman <px@ns1.net>
#*  @url       <http://playerx.net>
#*  @license   //github.com/px/cfapp-piwik-analytics/raw/master/LICENSE.txt
*/
CloudFlare.define('piwik_analytics/perf',['cloudflare/console'],function(__console){var module;__console.log("START piwik_analytics/perf");module={};module.now=function(){var e,fake,p;fake={};fake.now=function(){return new Date().getTime();};p=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||fake;try{return p.now();}catch(_error){e=_error;window.console.log(e);return fake.now();}};module.perfThen=module.now();__console.log("END piwik_analytics/perf");return module;});CloudFlare.define('piwik_analytics/setup',['cloudflare/console','piwik_analytics/config','piwik_analytics/perf'],function(__console,__config,__perf){var setup;if(__config==null){__config={_debug:true,piwik_install:'/piwik',site_id:'1',paq_push:"",tracking_all_subdomains:true,tracking_do_not_track:false};}
__console.log("START piwik_analytics/setup");window._paq=window._paq||[];setup={};setup.perfThen=__perf.now();setup.default_debug=true;setup.default_piwik_install="/piwik";setup.default_piwik_site_id="1";if(window.document.location.hostname==="js.cloudflare.com"){__console.log("js.cloudflare.com sandbox DETECTED!");__config._debug=true;__config.piwik_install="//piwik-ssl.ns1.net";__config.site_id="28";}
setup.setDefault=function(v,d,m){var e3;try{if(v===void 0){v=d;__console.log("Using test default "+m+" \t = "+d);}
return v;}catch(_error){e3=_error;v=d;__console.error(e3);return v;}};setup.setSiteId=function(_SiteId){if(!isNaN(_SiteId)){if(setup._debug!=null){__console.log("setup.setSiteId\t = "+_SiteId);}}else{if(setup._debug!=null){__console.error("setup.setSiteId -- Invalid Website Id = "+_SiteId+" ; defaulting to "+setup.default_piwik_site_id);}
_SiteId=setup.default_piwik_site_id;}
window._paq.push(['setSiteId',unescape(_SiteId)]);return _SiteId;};setup.setInstall=function(_install){if(_install==null){_install=setup.default_piwik_install;}
if(setup._debug!=null){__console.log("setup.setInstall\t = \""+unescape(_install)+"\"");}
window._paq.push(['setTrackerUrl',unescape(_install+"/piwik.php")]);return _install;};setup._debug=setup.setDefault(__config._debug,setup.default_debug,"Debug");setup.piwik_install=setup.setInstall(setup.setDefault(__config.piwik_install,setup.default_piwik_install,"Install"));setup.site_id=setup.setSiteId(setup.setDefault(__config.site_id,setup.default_piwik_site_id,"WebsiteId"));__console.log("END piwik_analytics/setup");return setup;});CloudFlare.define('piwik_analytics/piwik_js',['piwik_analytics/setup','cloudflare/console','piwik_analytics/perf'],function(__setup,__console,__perf){var module;__console.log("START piwik_analytics/piwik_js");module={};module._isPiwik=false;module.perfThen=__perf.now();CloudFlare.require([unescape(__setup.piwik_install+"/piwik.js")],module.isPiwik=true);__console.log("END piwik_analytics/piwik_js");return module;});CloudFlare.define('piwik_analytics',['cloudflare/console','piwik_analytics/perf','piwik_analytics/setup','piwik_analytics/piwik_js'],function(__console,__perf,__setup,__js){var e,myPiwik,now,__config,_debug;try{}catch(_error){e=_error;__console.error("uhoh "+e);}
__config={};try{_debug=__setup._debug||true;}catch(_error){e=_error;__console.error("uhoh "+e);}
now=function(){var fake,p;fake={};fake.now=function(){return new Date().getTime();};p=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||fake;try{return p.now();}catch(_error){e=_error;window.console.log(e);return fake.now();}};myPiwik={};myPiwik.perfThen=__perf.now();window._paq=window._paq||[];if(_debug!=null){CloudFlare.push({verbose:1});__console.log("Hello from the Piwik Analytics CloudFlare App!");window.localStorage.clear();}
myPiwik.getVisitorId=function(){window._paq.push([function(){var _visitorId;_visitorId=this.getVisitorId();if(_debug!=null){__console.log("_visitorId = "+_visitorId);}
return _visitorId;}]);return _visitorId;};myPiwik.menuOpts=function(){var wildcardZone;if(_debug!=null){__console.log("myPiwik.menuOpts");}
if(__config.tracking_all_subdomains==="true"||__config.tracking_all_subdomains===void 0){wildcardZone="*"+document.domain.split(".").slice(-2).join(".");window._paq.push(["setCookieDomain",wildcardZone]);}
if(__config.tracking_do_not_track==="true"||__config.tracking_do_not_track===void 0){window._paq.push(['setDoNotTrack',true]);}else{window._paq.push(['setDoNotTrack',false]);}
return window._paq;};myPiwik.paqPush=function(){if((!__config.paq_push)&&(__config.paq_push!==void 0)&&(__config.paq_push!=="")){window._paq.push(unescape(__config.paq_push));}
window._paq.push(['enableLinkTracking',true]);window._paq.push(['trackPageView']);return window._paq;};if(_debug!=null){myPiwik.getVisitorId();}
try{myPiwik.menuOpts();}catch(_error){e=_error;__console.error("uhoh "+e);}
try{myPiwik.paqPush();}catch(_error){e=_error;__console.error("uhoh "+e);}
if(_debug!=null){__console.log((now()-__setup.perfThen)+" ms"+"\t since __setup Module execution time");__console.log((now()-myPiwik.perfThen)+" ms"+"\t piwik_ananlytics Factory execution time");}
return myPiwik;});CloudFlare.define('piwik_analytics/showPerf',['cloudflare/console','piwik_analytics/setup','piwik_analytics/perf','piwik_analytics/piwik_js'],function(__console,__setup,__perf,__js){var module;module={};module.showPerf=function(){window._paq.push([function(){var e;try{__console.log((__perf.now()-__js.perfThen)+" ms"+"\t Piwik library fetch/load time");}catch(_error){e=_error;__console.error("uhoh "+e);}
try{__console.log((__perf.now()-__setup.perfThen)+" ms"+"\t Total execution time");}catch(_error){e=_error;__console.error("uhoh "+e);}
return true;}]);return true;};module.showPerf();return module;});
